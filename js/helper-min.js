$(document).ready((function(e){var n=n||{},t=t||{},a=a||{},s=s||{},o=o||{},l=l||{},c=c||{},d=d||{},u=u||{},h=h||{},p=(e("body.home").length,e("body.default").length),m=e("body.reddit").length;n={init:function(){t.init(),a.init(),s.init(),l.init(),c.init(),m&&d.init(),p&&h.init()}},t={init:function(){this.loadIt(),this.checkTab()},loadIt:function(){e.ajaxSetup({cache:!1}),e("#sidebar").load("includes/sidebar.html")},checkTab:function(){setTimeout((function(){var n=e("body").attr("class");e(".sidebar-item#"+n).addClass("active")}),500)}},a={init:function(){this.loadGoogleSearch(),this.searchStyling(),this.portalClicks(),this.checkHash()},loadGoogleSearch:function(){e.ajaxSetup({cache:!1}),e("#google-search").load("includes/part-search-google.html")},searchStyling:function(){var n=setInterval((function(){e("#google-search input[type='text']").length>=1&&(clearInterval(n),e('#google-search input[type="text"]').attr("placeholder","Search Google"),e(document).on("keydown",(function(n){"Escape"==n.key&&e('#google-search input[type="text"]').is(":focus")&&e('#google-search input[type="text"]').blur(),"Escape"!=n.key||e('#google-search input[type="text"]').is(":focus")||e('#google-search input[type="text"]').focus()})))}),500)},portalClicks:function(){e("#sidebar").on("click",".sidebar-item#home",(function(){o.init(),l.init(),u.init()})),e("#sidebar").on("click",".sidebar-item#reddit",(function(){d.init(),l.init()}))},checkHash:function(){var e=window.location.hash.substring(1);window.location.hash?(console.log("THERE IS a hash"),console.log(e),"reddit"==e?(d.init(),l.init()):(o.init(),u.init(),l.init())):(console.log("no hash here"),o.init(),u.init(),l.init())}},s={init:function(){}},o={init:function(){this.classChanges(),this.transitionContent(),this.homeMain(),this.loadHomeUtility()},classChanges:function(){e("body").attr("class","home"),e(".sidebar-wrapper .sidebar-item.active").removeClass("active"),e(".sidebar-wrapper .sidebar-item#home").addClass("active")},transitionContent:function(){e("#home-content").addClass("transitioning"),setTimeout((function(){e("#home-content").removeClass("transitioning")}),1e3)},homeMain:function(){e("#home-content").load("includes/part-home-main.html")},loadHomeUtility:function(){e("#utility-bar").load("includes/utility-home.html")},redditNews:function(){new URL(window.location.href).searchParams.get("code");new snoowrap({userAgent:"Tiggles Installed App",clientId:"8KyK8FAzO_5T6A",clientSecret:"",refreshToken:"-Yf_ltB3obqY3oYtEjlaJbCk9VxEeXQ"});try{console.log(response)}catch(e){console.log("doing this thaaang"),console.log(JSON.stringify(e,null,2))}}},u={init:function(){this.animeListAddBtn(),this.animeListSearch(),this.animeListAddAnime(),this.animeListLoadCookies(),this.animeListClearAll(),this.animeModal()},animeListAddBtn:function(){e(document).on("click",".add-to-list .add-more",(function(){e(".add-to-list").addClass("adding"),e(".add-to-list input").focus()})),e(document).on("click",".add-to-list .clear-search",(function(){e(".add-to-list").removeClass("adding"),e(".add-to-list input").blur(),e(".add-to-list .search-results").empty()}))},animeListSearch:function(){e(document).on("keyup","#anime-search",(function(){var n=e(this).val();e("ul.search-results").empty();var i={search:n},t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query ($id: Int, $page: Int, $perPage: Int, $search: String) {\n            Page (page: $page, perPage: $perPage) {\n              pageInfo {\n                total\n                currentPage\n                lastPage\n                hasNextPage\n                perPage\n              }\n              media (id: $id, search: $search, type: ANIME) {\n                id\n                coverImage {\n                  medium\n                }\n                \n                title {\n                  romaji\n                  english\n                }\n               \n                 streamingEpisodes {\n                  title\n                }\n              }\n            }\n          }\n          ",variables:i})};fetch("https://graphql.anilist.co",t).then((e=>e.json())).then((n=>{for(var i=0;i<n.data.Page.media.length;i++){var t=n.data.Page.media[i];e('<li data-id="'+t.id+'"><div class="anime-img" style="background-image: url('+t.coverImage.medium+')"></div><span>'+t.title.english+"</span><span>"+t.title.romaji+"</span></li>").appendTo("ul.search-results")}})).catch((e=>console.log("error with the anilist API search")))}))},animeListAddAnime:function(){e("section#main").on("click",".search-results li",(function(){var n={id:e(this).attr("data-id")},i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query ($id: Int) { # Define which variables will be used in the query (id)\n            Media (id: $id, type: ANIME) { # Insert our variables into the query arguments (id) (type: ANIME is hard-coded in the query)\n              id\n              title {\n                english\n              }\n              streamingEpisodes {\n                title\n                thumbnail\n                url\n                site\n              }\n            }\n          }\n          ",variables:n})};fetch("https://graphql.anilist.co",i).then((function(e){return e.json().then((function(n){return e.ok?n:Promise.reject(n)}))})).then((function(n){var i=n.data.Media.id,t=n.data.Media.title.english,a=n.data.Media.streamingEpisodes[0].title;if(e('<li class="'+i+'"><span class="a-name">'+t+'</span><span class="a-episode"><span>'+a+"</span></span></li>").appendTo(e("#anime-list > ul")),void 0!==Cookies.get("AnimeList"))animeListArr=JSON.parse(Cookies.get("AnimeList")),animeListArr.push(i),console.log(animeListArr),Cookies.set("AnimeList",JSON.stringify(animeListArr),{expires:365});else{var s=[i];Cookies.set("AnimeList",JSON.stringify(s),{expires:365})}})).catch((function(e){console.log(e)}))}))},animeListLoadCookies:function(){setTimeout((function(){if(void 0!==Cookies.get("AnimeList"))for(var n=JSON.parse(Cookies.get("AnimeList")),i=0;i<n.length;i++){var t={id:n[i]},a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n              query ($id: Int) { # Define which variables will be used in the query (id)\n                Media (id: $id, type: ANIME) { # Insert our variables into the query arguments (id) (type: ANIME is hard-coded in the query)\n                  id\n                  title {\n                    english\n                  }\n                  streamingEpisodes {\n                    title\n                    thumbnail\n                    url\n                    site\n                  }\n                }\n              }\n              ",variables:t})};function s(e){return e.json().then((function(n){return e.ok?n:Promise.reject(n)}))}function r(n){var i=n.data.Media.id,t=n.data.Media.title.english,a=n.data.Media.streamingEpisodes[0].title;e('<li class="'+i+'"><span class="a-name">'+t+'</span><span class="a-episode"><span>'+a+"</span></span></li>").appendTo(e("#anime-list > ul"))}function o(e){console.log(e)}fetch("https://graphql.anilist.co",a).then(s).then(r).catch(o)}}),300)},animeListClearAll:function(){e("section#main").on("click","a#clear-watchlist",(function(){Cookies.remove("AnimeList"),e("#anime-list .home-list > li:not(:first-child)").remove()}))},animeModal:function(){e("section#main").on("click","#anime-list li[class]",(function(){var n={id:e(this).attr("class"),page:1,perPage:15},t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query ($id: Int, $page: Int, $perPage: Int) { \n            Media (id: $id, type: ANIME) {\n              id\n              description\n              updatedAt\n              siteUrl\n              status(version:2)\n              relations{\n                edges{\n                  id \n                  relationType(version:2)\n                  node{\n                    id \n                    title{userPreferred}\n                    format \n                    type \n                    status(version:2)\n                    bannerImage\n                    coverImage{\n                      large\n                    }\n                  }\n                }\n              }\n              recommendations(perPage:7,sort:[RATING_DESC,ID]){\n                pageInfo{\n                  total\n                }\n                nodes{\n                  id \n                  rating \n                  userRating \n                  mediaRecommendation{\n                    id \n                    title{\n                      userPreferred\n                    }\n                    format \n                    type \n                    status(version:2)\n                    bannerImage \n                    coverImage{\n                      large\n                    }\n                  }\n                  user {\n                    id \n                    name \n                    avatar{\n                      large\n                    }\n                  }\n                }\n              }\n              reviews(page:$page, perPage: $perPage, sort:[RATING_DESC,ID]){\n                pageInfo{\n                  total \n                  perPage \n                  currentPage \n                  lastPage \n                  hasNextPage\n                }\n                nodes{\n                  createdAt\n                  updatedAt\n                  body\n                  summary \n                  rating\n                  score\n                  user{\n                    name \n                    avatar{\n                      large\n                    }\n                  }\n                }\n              }\n              trailer {\n                site\n                thumbnail\n                id\n              }\n              genres\n              tags {\n                name\n                description\n              }\n              averageScore\n              externalLinks {\n                url\n                site\n              }\n              title {\n                english\n                romaji\n              }\n              coverImage {\n                extraLarge\n              }\n              bannerImage\n              nextAiringEpisode {\n                airingAt\n                timeUntilAiring\n                episode\n              }\n              streamingEpisodes{\n                title\n                thumbnail\n                url\n                site\n              }\n            }\n          }\n          ",variables:n})};fetch("https://graphql.anilist.co",t).then((function(e){return e.json().then((function(n){return e.ok?n:Promise.reject(n)}))})).then((function(n){var t=n.data.Media,a=t.streamingEpisodes,s=t.tags,r=t.externalLinks,o=t.genres,l=t.reviews;console.log(t),e("#anime-modal .a-banner-img").css("background-image",'url("'+t.bannerImage+'")'),e("#anime-modal .a-cover-img").css("background-image",'url("'+t.coverImage.extraLarge+'")'),e("#anime-modal .a-user-score").text(t.averageScore),e("#anime-modal .a-title").text(t.title.english),e("#anime-modal .a-title-romaji").text(t.title.romaji),e("#anime-modal .a-description").html(t.description),null!=t.trailer&&e(`<li>\n                  <div class="embed-container">\n                    <iframe src="https://www.youtube.com/embed/${t.trailer.id}" allowfullscreen"></iframe>\n                  </div>\n                </li>      \n              `).appendTo(e("#anime-modal ul#a-trailer-list"));for(i=0;i<o.length;i++)e(`<li>${o[i]}</li>`).appendTo(e("#section-genres ul"));for(i=0;i<r.length;i++)e(`<li>\n                  <a href="${r[i].url}" target="_blank" title="${r[i].site}">${r[i].site}</a>\n                </li>`).appendTo(e("#section-links ul"));for(i=0;i<s.length;i++)e(`<li data-attr="${s[i].description}">${s[i].name}</li>`).appendTo(e("#section-tags ul"));for(e('<li>\n                  <a class="link-4anime" href="//4anime.to/?s='+t.title.romaji.replace(" ","+")+'" target="_blank"></a>\n                </li>\n                <li>\n                  <a class="link-animedao" href="//animedao.to/search/?search='+t.title.romaji.replace(" ","+")+'" target="_blank"></a>\n                </li>\n                <li>\n                  <a class="link-animekisa" href="//animekisa.tv/search?q='+t.title.romaji.replace(" ","+")+'" target="_blank"></a>\n                </li>\n            ').appendTo("#section-ulinks ul"),i=0;i<a.length;i++)e(`<li>\n                  <div class="image-side" style="background-image:url('${a[i].thumbnail}')"></div>\n                  <div class="copy-side">\n                    <div class="inner-wrapper">\n                      <h4>${a[i].title}</h4>\n                      <ul class="services-list">\n                        <li><a href="${a[i].url}">${a[i].site}</a></li>\n                      </ul>\n                    </div>\n                  </div>\n                </li>`).appendTo(e("ul#a-episode-list"));if(null!=l)for(i=0;i<l.nodes.length;i++){var c=l.nodes[i],d=c.updatedAt,u=JSON.stringify(d),h=(p=JSON.parse(u),m=void 0,g=void 0,f=void 0,m=new Date(1e3*p),g=m.getFullYear(),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m.getMonth()],m.getDate()+" "+f+" "+g+" "+m.getHours()+":"+m.getMinutes()+":"+m.getSeconds());console.log(c.updatedAt),e(`\n                <li>\n                  <div class="profile-side">\n                    <div class="r-img" style="background-image: url('${c.user.avatar.large}');"></div>\n                    <spans class="r-author">${c.user.name}</span>\n                  </div>\n                  <div class="review-side">\n                    <div class="inner-wrapper">\n                      <div class="review-footer">\n                        <span class="r-updatedAt">${h}</span>\n                      </div>\n                    </div>\n                  </div>\n                </li>\n                `).appendTo("ul#a-review-list")}var p,m,g,f;e("#anime-modal").addClass("active")})).catch((function(e){alert("Error, check console"),console.error(e)}))})),e("section#main").on("click","#close-modal",(function(){e("#anime-modal").removeClass("active"),setTimeout((function(){e("#anime-modal .a-banner-img, #anime-modal .a-cover-img").css("background-image",""),e("#anime-modal .a-user-score, #anime-modal .a-title, #anime-modal .a-title-romaji, #anime-modal .a-description, #anime-modal .main-copy > ul, .info-section > ul").empty()}),500)})),e("section#main").on("click",".content-switcher span:not(.active)",(function(){var n=e(this).attr("data-id");e(".modal-inner .main-copy > ul.active, #anime-modal .content-switcher span.active").removeClass("active"),e('.modal-inner .main-copy > ul[id="'+n+'"]').addClass("active"),e(this).addClass("active")})),e("section#main").on("click",".info-section span",(function(){e(this).parent(".info-section").toggleClass("active")}))}},l={init:function(){this.registerZip(),this.pullJson(),this.unitChange()},registerZip:function(){function n(){if(e("input#userZip").val().length){var n=e("input#userZip").val();Cookies.set("userZip",n,{expires:365}),e("#weather-signin").html("<p>Your zip code has been set to<br>"+n+".</p>"),setTimeout((function(){e("#weather-signin").addClass("hidden"),e("#weather-wrapper").addClass("active")}),3e3)}}userZip=Cookies.get("userZip"),null==userZip?setTimeout((function(){e("#weather-signin").removeClass("hidden")}),1e3):e("#weather-wrapper").addClass("active"),e("#weather-signin .btn-submit").on("click",(function(){n()})),setTimeout((function(){e("input#userZip").bind("keypress",(function(e){13==(e.keyCode||e.which)&&n()}))}),1e3)},pullJson:function(){userUnit=Cookies.get("userWeatherUnit"),null==userUnit||"metric"==userUnit?setTimeout((function(){var n=Cookies.get("userZip");fetch("//api.openweathermap.org/data/2.5/weather?zip="+n+"&appid=d3dbee43ce83080a383c1aae158663ba&units=metric").then((e=>e.json())).then((n=>{var i=n.name,t=n.main.temp,a=n.weather[0].icon,s=n.weather[0].description,r=t.toFixed(1);e(".current-weather .temperature .value").text(r),e(".current-weather .location span").text(i),e(".current-weather .right-side .weather-description").text(s),e(".current-weather .weather-icon").css("background-image",'url("//openweathermap.org/img/wn/'+a+".png"),e("#weather-wrapper").addClass("active")})).catch((e=>console.log("there is a weather map api error")))}),500):setTimeout((function(){var n=Cookies.get("userZip"),i=Cookies.get("userWeatherUnit");fetch("//api.openweathermap.org/data/2.5/weather?zip="+n+"&appid=d3dbee43ce83080a383c1aae158663ba&units="+i).then((e=>e.json())).then((n=>{var i=n.name,t=n.main.temp,a=n.weather[0].icon,s=n.weather[0].description,r=t.toFixed(1);e(".current-weather .temperature .value").text(r),e(".unit-selector a.active").removeClass("active"),e(".unit-selector #imperial").addClass("active"),e(".left-side .temperature.unit-c").removeClass("unit-c").addClass("unit-f"),e(".current-weather .location span").text(i),e(".current-weather .right-side .weather-description").text(s),e(".current-weather .weather-icon").css("background-image",'url("//openweathermap.org/img/wn/'+a+".png"),e("#weather-wrapper").addClass("active")})).catch((e=>console.log("there is a weather map api error")))}),500)},unitChange:function(){e(document).on("click",".unit-selector a",(function(){if(!e(this).hasClass("active")){theUnit=e(this).attr("id");var n=Cookies.get("userZip");fetch("//api.openweathermap.org/data/2.5/weather?zip="+n+"&appid=d3dbee43ce83080a383c1aae158663ba&units="+theUnit).then((e=>e.json())).then((n=>{var i=n.name,t=n.main.temp,a=n.weather[0].icon,s=n.weather[0].description,r=t.toFixed(1);e(".current-weather .temperature .value").text(r),e(".current-weather .location span").text(i),e(".current-weather .right-side .weather-description").text(s),e(".current-weather .weather-icon").css("background-image",'url("//openweathermap.org/img/wn/'+a+".png")})).catch((e=>console.log("there is a weather map api error"))),e(".unit-selector a.active").removeClass("active"),e(this).addClass("active"),Cookies.remove("userWeatherUnit"),Cookies.set("userWeatherUnit",theUnit,{expires:365}),e(".unit-selector #metric.active").length?e(".current-weather .left-side .temperature.unit-f").removeClass("unit-f").addClass("unit-c"):e(".current-weather .left-side .temperature.unit-c").removeClass("unit-c").addClass("unit-f")}return!1}))}},c={init:function(){},fetchNews:function(){options={method:"POST",headers:{"Content-Type":"text/plain",Accept:"application/json"},body:JSON.stringify({})},fetch("https://newsapi.org/v2/everything?apiKey=fe9023de4c4a433d96fbd01d63178a45",options,{mode:"no-cors",credentials:"same-origin"}).then((e=>e.json())).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},fetchNews2:function(){setTimeout((function(){const n=new XMLHttpRequest;n.withCredentials=!0,n.addEventListener("readystatechange",(function(){if(this.readyState===this.DONE){for(var n=JSON.parse(this.responseText),i=0;i<n.articles.length;i++){var t=n.articles[i],a=t.title,s=t.link;if(null==t.media)var r="/css/images/brand/favi.jpg";else r=t.media;e('<li><a target="_blank" href="'+s+'" style="background-image: url('+r+')"><span>'+a+"</span></a></li>").appendTo("ul.all-news")}e("ul.all-news li").shuffle()}})),n.open("GET","https://newscatcher.p.rapidapi.com/v1/latest_headlines?lang=en&media=True"),n.setRequestHeader("x-rapidapi-key","92d9452a90msh172394c7b5fafe1p104d05jsna7cdba7833a1"),n.setRequestHeader("x-rapidapi-host","newscatcher.p.rapidapi.com"),n.send(null)}),1e3)},shuffleNews:function(){}},d={init:function(){this.classChanges(),this.transitionContent(),this.loadRedditMain(),this.unhideLogin()},classChanges:function(){e("body").attr("class","reddit"),e(".sidebar-wrapper .sidebar-item.active").removeClass("active"),e(".sidebar-wrapper .sidebar-item#reddit").addClass("active")},transitionContent:function(){e("#home-content").addClass("transitioning"),setTimeout((function(){e("#home-content").removeClass("transitioning")}),1e3)},loadRedditMain:function(){e("#home-content").load("includes/part-reddit-main.html")},checkLoggedIn:function(){function e(e){for(var n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var t=n[i].split("=");if(t[0]==e)return t[1]}return!1}e("code"),e("state");e("code");var n=new URL(window.location.href).searchParams.get("code");new snoowrap({userAgent:"Web App",clientId:"cQLY-btbx4lhmw",clientSecret:"",accessToken:n});r.getSubscriptions({limit:5}).then(console.log)},unhideLogin(){setTimeout((function(){e("#reddit-login").removeClass("hidden")}),500)}},h={init:function(){}},n.init()}));